# The operating system and its main tasks
---
### Tasks and types of operating system
- resource management system
	- components can be accessed through it
	- in case of multiple users/processes
		- scheduling
		- assignment and control of privileges
	- provides a consistent environment for programs
- main tasks
	- scheduling
	- interrupt management
	- process control
	- storage and memory management
	- logging
	- peripheral management
- grouping
	- one user, one task
		- DOS (CLI, not open source)
	- one user, multiple tasks
		- Windows (GUI, not open source)
	- multi-user, multitask
		- Unix, Linux (GUI or CLI, can be open source)
---
### Operational structure
- kernel
	- base of the OS
	- runs in the background
	- perform basic tasks
	- manages hardware resources
	- multiplexing
		- the kernel dictates how long a particular process can use a particular piece of hardware
	- no need for an OS or kernel if the programmer takes over the tasks when creating the program
		- this was the basic
		- restart was required to start a new program
			- over time boot tasks, utilities and routines became permanent
				- OSes appeared
	- types of kernel
		- monolithic
			- rich and efficient abstractions for the underlying hardware
		- microkernels
			- small basic set of hardware management tools, providing detailed functionality with a number of extensions
		- hybrid/modified microkernels
			- similar to microkernels
			- more, more detailed code → higher speed
		- exokernel
			- does not provide abstraction/permanent kernel
			- provides indirect/direct access to hardware only
	- tasks 
		- peripheral management
		- provides memory access
		- processor time allocation
		- management of the hard drives
		- file system management
- shell (system shell, console)
	- interface between user and kernel
	- managing applications
	- less resource intensive than GUI 
		- most servers are Unix based with shell
	- programmable scripts
		- special command language
			- the OS understands
				- no need to compile
	- capabilities
		- executing user codes
		- running scripts
		- using conditional expressions, branching loops
		- internal commands
			- file and folder operations
				- copy, del, ren, md
			- navigation
				- cd, dir
			- date, time
			- command line statements
		- external commands
			- contained in an executable file started by the command line
			- disk management
				- format, scandisk, diskcopy, chkdsk
			- memory information
				- mem
				- help
				- text editing
					- nano
				- network device management
					- ipconfig
		- creating pseudo commands
		- internal variables
		- manipulating the environment before new processes
		- redirecting I/O
		- transferring data between processes via pipe
		- starting processes in the background
		- command line editing 
		- command history
		- stopping and restarting running processes
		- sending and receiving signals
			- kill, trap
		- waiting for another process or sleep
---
### Areas of working
- memory management
	- one of the most important resource
		- manages it
	- allocating memory efficiently
		- memory management unit
			- most important parts of the process goes to the memory
			- the rest are sent to swap
				- space reserved on the hard drives
				- paging file
	- 2 types of programs
		- resident
			- always in memory (faster)
				- antivirus
				- firewall
		- transient
			- loads only when called
- process control
	- process
		- started program
	-  provides access to resources
		- often impossible to manage because future demand is unknown
			- deadlock
- interrupt management
	- interrupt
		- a signal that informs you that something has happened
	- types
		- interrupt
			- signal of a long-awaited data
		- exception
			- generated by the processor, when it detects an error in the process
		- non maskable interrupt
			- severe hardware failure
			- usually terminated by an immediate shutdown (BSOD)
		- trap
			- interrupted by the software
			- if the process directly accesses the OS or would execute and instruction that it has no right to
	- scenario
		1. an interrupt is received
		2. the CPU completes the operation that being performed
			- if no interrupt is disabled at that level, accepts the request
			- otherwise it waits
		3. the CPU saves the state vector of the running process
		4. the CPU switches to privileged (kernel) mode, disabling all interrupts that are less than or equal priority
		5. the CU determines the location of the interrupt request and retrieves the corresponding routine address from the interrupt vector table
		6. the serving routine runs
		7. the CPU returns to user mode, allows disabled requests
		8. the CPU resets the interrupted process state vector, returning control
- communication with peripherals 
	- establish a connection between the user and the machine
		- not direct
	- the OS communicates with the hardware
		- only the useful parts are transmitted through the peripherals to the user
---
### Multitasking
- running programs in parallel
- the OS is responsible for separating processes and managing parallel execution
	- usually apparent
	- in reality threads are running alternately, just at a high speed that it can't be noticed by the user
		- Time-Slice Multithreading
	- real multithreading
		- each thread runs one thing continuously
---
### Installing the OS
- media device inserted into the PC
- in BIOS, boot sequence is set
- installation, defining partitions
---
### Booting the OS
- BIOS searches boot sectors for boot file
	- possible dual boot
		- in case of multiple systems
- loading kernel
- initializing devices
	- searching for new hardware
	- searching for drivers and starting them
- starting services
	- GUI
- starting user interactions 
- logging in
- starting programs
---
### Shutting down the PC
When the computer is switched off, the machine stops running programs, processes, system processes and the cuts power

---
### OS failure modes, troubleshooting
- BSOD/critical error
	- fatal system failure, the PC can no longer run even basic processes
		- reboot
- protection errors 
	- driver failure 
	- corrupted files
	- invalid page faults
		- irregular operation
	- device management errors
	- missing system files
	- kernel errors
- what to do 
	- reading documentation
	- checking regedit
	- driver reinstalling
	- possibly a full reinstallation with backup
---
### Hardware installation
Nowadays it's "plug-n-play", after plugging in, the system automatically installs the basic drivers.
It is recommended to turn off the PC before removing a part, because safety is number one priority.

---
### Installing, configuring and uninstalling software
- install
	- usually installed with an installer software (Wizard)
	- quick installation
		- recommended for average users
	- advanced installation
		- for experts
			- installation location
			- partial installation
	- accepting license agreement
	- more and more OSes are using a store, which centralizes the download and installation of software
- uninstall
	- usually done via OS or uninstaller software
---
### Running softwares
- automatic startup
	- usually run at boot time
		- slows down the boot process
- manual startup
	- when the user starts the program
- task manager
	- used to view running programs
	- to stop them
	- to raise their priority
	- stopping unused programs to free up resources
---
### Disk management and file systems
- FAT (File Allocation Table)
	- developed for MS-DOS
	- simple, robust
	- designed to be compatible with Windows systems
- FAT32 (FAT 32-bit version)
	- an evolution of FAT
		- still used today
	- max partition size 8 TB
	- max file size 4 GB
- exFAT (extended FAT)
	- latest version of FAT
	- max partition size 128 PB
	- max file size 16 EB
- NTFS (New Technology File System)
	- standard file system for Windows NT and its successors
	- privilege system
	- file compression on the fly
	- creation of fault-tolerant partitions
	- max partition size 8 PB
	- max file size 16 EB
- EXT (Extended File System)
	- latest
		- ext4 (2008)
	- linux standard file system
	- max partition size 1 EB
	- max file size 16 GB
---
### Directory structure
- file ordering
	- hierarchical directory structure
	- a folder can have contents, subdirectories and one parent directory
	- in case of no subdirectory
		- closing directory
	- absolute path
		- from root directory we specify the path
	- relative path
		- from the working directory we specify the path

##### operations
- windows
	- GUI
- linux
	- create (mkdir)
	- delete (rm -r)
	- copy (cp -r)
	- move (mv)
	- rename
	- listing (ls)
	- directory changing (cd)
	- mounting partition/image file (mount)
---
### Files
- what is a file?
	- a coherent set of data with an identifier
- most common file types
	- can be executed
		- program files (.exe, .com)
			- machine-coded instructions, loaded int memory and executed when run
		- batch command files (.bat)
			- text commands, compiled by the system when executed
	- data files (.dat)
		- in which programs store the data they need to operate or input
	- text files
		- plain text (.txt)
			- contains only characters, sorted by input
		- formatted text (.doc, .docx, .odt)
			- texts created with a graphical editor
			- have formatting
			- may contain other objects
				- images
		- source files (.cs, .pas)
			- a set of instructions written in a particular programming language
			- made into an executable file by a compiler
	- system files (.sys)
		- essential parts of the OS
	- multimedia files
		- images (.jpg, .png, .gif)
		- sound files (.mp3, .wav)
		- video files (.mp4, .avi)
	- compressed files (.zip, .7z, .rar)
		- containing compressed files, which can function after unpacking
	- other
		- office (.xlsx, .pptx, .accdb)
			- files from spreadsheets, presentation softwares, database managers
		- HTML (.html)
			- web page
		- temp (.tmp)
			- temporary files
- naming 
	- consist of 2 parts
		- name
			- freely chosen, within limits
				- max 255 characters
				- no OS reserved characters
					- / \ : <> " | * ?
		- extension
			- file type
- properties stored about files
	- filename
	- extension
	- size (B)
	- creation/editing date
	- attributes
		- A (Archive)
			- indicates if the file has not yet been archived
				- not used
		- R (Read only)
		- H (Hidden)
		- S (System)
	- privileges
- association
	- windows
		- default programs
		- have to select a manager program
	- other OS
		- no specific association
- organizing the physical storage
	- the OS stores item in a save queue on disk
	- during modification, file size can rise -> too big for allocated space -> getting a new space -> creating a hole on the disk
	- filling the holes
		- the OS puts the new files in the first empty space of the right size
		- smaller holes may remain
			- fragmentation
				- holes occupy the space as they are empty, but cannot be filled
		- defragmentation
			- the system repackages files so that no holes are left
- physical implementation of operations
	- root catalog
		- contains the identifier, size, properties, sector number
	- data retrieval
		- As long as just deleting a file and not overwriting the sector, the file can be retrieved because it is just and indicator that a sector can be written to.
- searching
	- our files can "disappear"
		- the OS provides the search
	- searchable attributes
		- filename
		- extension
		- content
		- date
---
### Parameterized execution
- mandatory (specify the scope of the data)
	- without which the command cannot be interpreted
- optional (affects the conditions of execution)
	- other parameters, without which the command can be executed
---
### Maintenance of hard drives
- formatting
	- the contents of the disk are erased
		- selecting file system to which we want to format
			- quick format
				- only the catalog is erased
- partitioning
	- dividing the disk into parts
- scandisk
	- lock bad sectors
- defragmentation
	- eliminating small empty holes on the disk
---
### Compression
- Parkinson's law
	- data fills up the available space
		- compressing data into smaller space
			- increasing density
- Redundancy
	- safer, but takes up more space
		- easier to recover in a case of error
- error threshold 
	- extraction of unnecessary data
		- indistinguishable color tones
		- inaudible sounds
- lossy
	- lack of data outside our sensory limitations does not matter 
		- can be extracted
	- compressed material will not be recoverable
	- compression rate can be adjusted
	- significant space-saving
	- examples
		- JPEG (Joint Photographic Expert Group)
			- divides the image into 8x8 squares, stores the average of the dots
				- only the deviation of the pixels from the average is stored
		- MP3
			- most common audio compression method
			- extraction of inaudible sounds
			- noise filtering
				- bit density reduced
		- H-264 or H-265
			- video compression technique
			- 264
				- pixels within frames are related to each other
			- 265
				- successive frames in a sequence are related to each other
- lossless
	- Redundancy minimization
		- transcoding
			- longer code is made shorter
	- ensures perfect recoverability
	- degree depends not only on the procedure but also on the properties of the data set
	- examples
		- RLE (Run-Length Encoding)
			- used for images where it is common for adjacent pixels are the same color
			- color code is written once, then only the number of pixels of the same color
		- Huffman code
			- variable length encoding
			- frequent symbols
				- shorter code
			- rare symbols
				- longer code
			- the code tree containing the optimal code words must also be stored
		- LZW code
		- no preprocessing required
		- reads the file, builds the dictionary to use for encoding
		- dictionary can also be built at decoding
			- no need to store in archive
- compression of image, audio, video
	- most of the time we work with compressed files
		- text
			- mostly works on xml basis
				- has a complex folder structure
				- compressed zip-like
		- image
			- lossless
				- bitmap (.bmp)
			- lossy
				- .png, .jpg
			- conditionally lossy
				- .gif 
					- 256 color palette
		- audio
			- .mp3, .ogg
		- video
			- similar to image compression
				- .mp4, .avi
- compression programs
	- Windows integrated 
		- zip 
		- works on a folder basis
	- WinRar
		- right-click solution
	- 7z
		- lightweight
		- easy to use
- self-compressing, resizing and protected files
	- self extracting
		- no unpacker needed
		- unpacked by an executable file
			- installers
	- scalable
		- needed in the days of floppy disks and today for internet transmission
- protected files
	- cannot be unzipped by themselves
	- password needed
---
### Utilities
- basic utilities
	- disk/partition managers
		- creating and managing partitions
	- file managers
		- file and folder operations
	- compressors
		- archiving and compressing files
	- office programs
		- word processing, spreadsheets
		- mailing programs
	- multimedia
		- opening, creating and editing multimedia files
	- firewall
		- preventing network intrusions
	- virus protection
		- searching and disposing viruses
- types
	- internal
		- part of the OS
			- not compulsory
			- makes the computer easier to use
			- adding new features
	- external
		- installed by the user
---
### Viruses, anti viruses
#viruses 

---
### networking
- use of software is needed for network connection
	- interfaces (drivers)
	- traffic control
		- these are usually included in the OS
- typical additional functions of a server's OS
	- remote access control
	- ssh server
	- file and printer sharing
	- web server
	- SMTP, POP, IMAP server 
		- mailing
	- FTP server
	- DNS server
	- proxy
	- firewall
	- more CPU focused hardware
- model of networking
	- #networkmodel 
- implementation of network connectivity
	- Software
		- driver
		- settings
			- IP
			- DNS
			- gateway
			- subnet mask
			- proxy
			- encryption
			- channel
			- VPN
- ways of accessing network services
	- connectivity
		- appropriate infrastructure
		- transmission media
		- settings
	- conditions of use
		- protocols
		- privileges
- user identification, privilege management
	- username
	- password
	- 2FA (Two Factor Authenthication)
		- seperate code required for logging in
			- generated by sms or mobile app
	- biometric
		- fingerprint
		- handprint
		- retina scan
		- facial recognition 
- credentials
	- assigning privileges is the responsibility of the administrator, facilitated by the OS of the server
	- management is also the responsibility of the server OS
		- login
		- disk space usage
		- right to files, folders, drives
			- read, write, delete, rename. create, search